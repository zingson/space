# 积分账户(points)

积分账户编号，一般对应会员系统中的用户ID，使用此积分服务，需要在会员服务建立一个与积分账户对应的记录。

仅限积分操作相关业务逻辑。

交易类型：充值、消费、过期、作废、冲正

查询操作：
 
- 查询剩余积分，条件：账户编号
- 查询交易记录, 条件：账户编号，根据时间排序
- 

更新操作：

- 充值交易，账户编号、积分数、备注信息   记录流水，修改剩余积分
- 消费交易，账户编号、积分数、业务系统标识、业务订单号、备注信息   记录流水，修改剩余积分
- 退回交易，账户编号、积分数、业务系统标识、业务订单号、备注信息   记录流水，修改剩余积分
- 过期交易，账户编号、积分数、备注信息   记录流水，修改剩余积分
- 作废交易，账户编号、积分数、备注信息   记录流水，修改剩余积分
- 冲正交易，账户编号、积分数、需要冲正的交易流水号 ，会验证流水记录的积分数与当前请求的积分数

- 创建账户，账户备注 ，响应账户编号

积分过期机制


## 数据结构

积分账户集合
账户编号5位数字、创建时间、状态（1=正常 2=禁用 9=注销）、积分有效期天数（天）、剩余积分

积分可用集合
记录ID_id、账户编号、充值时间、过期时间、积分数、充值交易流水

积分交易记录
交易流水_id、账户编号、交易积分数、剩余积分数、交易类型、交易时间、交易备注、业务系统标识名、交易业务系统订单号

账户操作记录
操作流水_id、操作类型、操作备注、交易流水、账户编号、操作人、操作时间




