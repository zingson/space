# 服务发现接口设计

通信方式：Websocket

## 数据结构

Mongodb集合字段定义：
```json
{
  "name": "member",
  "addrs": [],
  "poll": ["gateway"] 
}
```


## 接口定义

### WS1001 业务服务连接注册中心

- 业务服务连接注册地址：`/ws/discover`
- 业务服务发送消息定义：
```json
{
  "name": "gateway",
  "addr": "127.0.0.1:8080",
  "poll": ["order","member"]
}
```
发送注册消息，注册中心保存业务服务连接信息。
注册中心以服务名为key，当前服务name为数组元素，当接收到服务器新注册节点时，通知数组中所有服务。
    
- 注册中心发送消息定义：
```json
{
  "member": ["127.0.0.1:80","127.0.0.1:81"]
}
```
